{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/isomorphic-fetch/fetch-npm-browserify.js","node_modules/pubsub-js/src/pubsub.js","node_modules/whatwg-fetch/fetch.js","src/scripts/index.js","src/scripts/penguin-controller.js","src/scripts/penguin-model.js","src/scripts/penguin-view.js"],"names":[],"mappings":"AAAA;ACAA;AACA;AACA;AACA;AACA;AACA;AACA;;ACNA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AClQA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AA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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","// the whatwg-fetch polyfill installs the fetch() function\n// on the global object (window or self)\n//\n// Return that as the export for use in Webpack, Browserify etc.\nrequire('whatwg-fetch');\nmodule.exports = self.fetch.bind(self);\n","/*\nCopyright (c) 2010,2011,2012,2013,2014 Morgan Roderick http://roderick.dk\nLicense: MIT - http://mrgnrdrck.mit-license.org\n\nhttps://github.com/mroderick/PubSubJS\n*/\n(function (root, factory){\n\t'use strict';\n\n\tvar PubSub = {};\n\troot.PubSub = PubSub;\n\tfactory(PubSub);\n\n\t// AMD support\n\tif (typeof define === 'function' && define.amd){\n\t\tdefine(function() { return PubSub; });\n\n\t// CommonJS and Node.js module support\n\t} else if (typeof exports === 'object'){\n\t\tif (module !== undefined && module.exports) {\n\t\t\texports = module.exports = PubSub; // Node.js specific `module.exports`\n\t\t}\n\t\texports.PubSub = PubSub; // CommonJS module 1.1.1 spec\n\t\tmodule.exports = exports = PubSub; // CommonJS\n\t}\n\n}(( typeof window === 'object' && window ) || this, function (PubSub){\n\t'use strict';\n\n\tvar messages = {},\n\t\tlastUid = -1;\n\n\tfunction hasKeys(obj){\n\t\tvar key;\n\n\t\tfor (key in obj){\n\t\t\tif ( obj.hasOwnProperty(key) ){\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t *\tReturns a function that throws the passed exception, for use as argument for setTimeout\n\t *\t@param { Object } ex An Error object\n\t */\n\tfunction throwException( ex ){\n\t\treturn function reThrowException(){\n\t\t\tthrow ex;\n\t\t};\n\t}\n\n\tfunction callSubscriberWithDelayedExceptions( subscriber, message, data ){\n\t\ttry {\n\t\t\tsubscriber( message, data );\n\t\t} catch( ex ){\n\t\t\tsetTimeout( throwException( ex ), 0);\n\t\t}\n\t}\n\n\tfunction callSubscriberWithImmediateExceptions( subscriber, message, data ){\n\t\tsubscriber( message, data );\n\t}\n\n\tfunction deliverMessage( originalMessage, matchedMessage, data, immediateExceptions ){\n\t\tvar subscribers = messages[matchedMessage],\n\t\t\tcallSubscriber = immediateExceptions ? callSubscriberWithImmediateExceptions : callSubscriberWithDelayedExceptions,\n\t\t\ts;\n\n\t\tif ( !messages.hasOwnProperty( matchedMessage ) ) {\n\t\t\treturn;\n\t\t}\n\n\t\tfor (s in subscribers){\n\t\t\tif ( subscribers.hasOwnProperty(s)){\n\t\t\t\tcallSubscriber( subscribers[s], originalMessage, data );\n\t\t\t}\n\t\t}\n\t}\n\n\tfunction createDeliveryFunction( message, data, immediateExceptions ){\n\t\treturn function deliverNamespaced(){\n\t\t\tvar topic = String( message ),\n\t\t\t\tposition = topic.lastIndexOf( '.' );\n\n\t\t\t// deliver the message as it is now\n\t\t\tdeliverMessage(message, message, data, immediateExceptions);\n\n\t\t\t// trim the hierarchy and deliver message to each level\n\t\t\twhile( position !== -1 ){\n\t\t\t\ttopic = topic.substr( 0, position );\n\t\t\t\tposition = topic.lastIndexOf('.');\n\t\t\t\tdeliverMessage( message, topic, data, immediateExceptions );\n\t\t\t}\n\t\t};\n\t}\n\n\tfunction messageHasSubscribers( message ){\n\t\tvar topic = String( message ),\n\t\t\tfound = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic])),\n\t\t\tposition = topic.lastIndexOf( '.' );\n\n\t\twhile ( !found && position !== -1 ){\n\t\t\ttopic = topic.substr( 0, position );\n\t\t\tposition = topic.lastIndexOf( '.' );\n\t\t\tfound = Boolean(messages.hasOwnProperty( topic ) && hasKeys(messages[topic]));\n\t\t}\n\n\t\treturn found;\n\t}\n\n\tfunction publish( message, data, sync, immediateExceptions ){\n\t\tvar deliver = createDeliveryFunction( message, data, immediateExceptions ),\n\t\t\thasSubscribers = messageHasSubscribers( message );\n\n\t\tif ( !hasSubscribers ){\n\t\t\treturn false;\n\t\t}\n\n\t\tif ( sync === true ){\n\t\t\tdeliver();\n\t\t} else {\n\t\t\tsetTimeout( deliver, 0 );\n\t\t}\n\t\treturn true;\n\t}\n\n\t/**\n\t *\tPubSub.publish( message[, data] ) -> Boolean\n\t *\t- message (String): The message to publish\n\t *\t- data: The data to pass to subscribers\n\t *\tPublishes the the message, passing the data to it's subscribers\n\t**/\n\tPubSub.publish = function( message, data ){\n\t\treturn publish( message, data, false, PubSub.immediateExceptions );\n\t};\n\n\t/**\n\t *\tPubSub.publishSync( message[, data] ) -> Boolean\n\t *\t- message (String): The message to publish\n\t *\t- data: The data to pass to subscribers\n\t *\tPublishes the the message synchronously, passing the data to it's subscribers\n\t**/\n\tPubSub.publishSync = function( message, data ){\n\t\treturn publish( message, data, true, PubSub.immediateExceptions );\n\t};\n\n\t/**\n\t *\tPubSub.subscribe( message, func ) -> String\n\t *\t- message (String): The message to subscribe to\n\t *\t- func (Function): The function to call when a new message is published\n\t *\tSubscribes the passed function to the passed message. Every returned token is unique and should be stored if\n\t *\tyou need to unsubscribe\n\t**/\n\tPubSub.subscribe = function( message, func ){\n\t\tif ( typeof func !== 'function'){\n\t\t\treturn false;\n\t\t}\n\n\t\t// message is not registered yet\n\t\tif ( !messages.hasOwnProperty( message ) ){\n\t\t\tmessages[message] = {};\n\t\t}\n\n\t\t// forcing token as String, to allow for future expansions without breaking usage\n\t\t// and allow for easy use as key names for the 'messages' object\n\t\tvar token = 'uid_' + String(++lastUid);\n\t\tmessages[message][token] = func;\n\n\t\t// return token for unsubscribing\n\t\treturn token;\n\t};\n\n\t/* Public: Clears all subscriptions\n\t */\n\tPubSub.clearAllSubscriptions = function clearAllSubscriptions(){\n\t\tmessages = {};\n\t};\n\n\t/*Public: Clear subscriptions by the topic\n\t*/\n\tPubSub.clearSubscriptions = function clearSubscriptions(topic){\n\t\tvar m;\n\t\tfor (m in messages){\n\t\t\tif (messages.hasOwnProperty(m) && m.indexOf(topic) === 0){\n\t\t\t\tdelete messages[m];\n\t\t\t}\n\t\t}\n\t};\n\n\t/* Public: removes subscriptions.\n\t * When passed a token, removes a specific subscription.\n\t * When passed a function, removes all subscriptions for that function\n\t * When passed a topic, removes all subscriptions for that topic (hierarchy)\n\t *\n\t * value - A token, function or topic to unsubscribe.\n\t *\n\t * Examples\n\t *\n\t *\t\t// Example 1 - unsubscribing with a token\n\t *\t\tvar token = PubSub.subscribe('mytopic', myFunc);\n\t *\t\tPubSub.unsubscribe(token);\n\t *\n\t *\t\t// Example 2 - unsubscribing with a function\n\t *\t\tPubSub.unsubscribe(myFunc);\n\t *\n\t *\t\t// Example 3 - unsubscribing a topic\n\t *\t\tPubSub.unsubscribe('mytopic');\n\t */\n\tPubSub.unsubscribe = function(value){\n\t\tvar descendantTopicExists = function(topic) {\n\t\t\t\tvar m;\n\t\t\t\tfor ( m in messages ){\n\t\t\t\t\tif ( messages.hasOwnProperty(m) && m.indexOf(topic) === 0 ){\n\t\t\t\t\t\t// a descendant of the topic exists:\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t},\n\t\t\tisTopic    = typeof value === 'string' && ( messages.hasOwnProperty(value) || descendantTopicExists(value) ),\n\t\t\tisToken    = !isTopic && typeof value === 'string',\n\t\t\tisFunction = typeof value === 'function',\n\t\t\tresult = false,\n\t\t\tm, message, t;\n\n\t\tif (isTopic){\n\t\t\tPubSub.clearSubscriptions(value);\n\t\t\treturn;\n\t\t}\n\n\t\tfor ( m in messages ){\n\t\t\tif ( messages.hasOwnProperty( m ) ){\n\t\t\t\tmessage = messages[m];\n\n\t\t\t\tif ( isToken && message[value] ){\n\t\t\t\t\tdelete message[value];\n\t\t\t\t\tresult = value;\n\t\t\t\t\t// tokens are unique, so we can just stop here\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tif (isFunction) {\n\t\t\t\t\tfor ( t in message ){\n\t\t\t\t\t\tif (message.hasOwnProperty(t) && message[t] === value){\n\t\t\t\t\t\t\tdelete message[t];\n\t\t\t\t\t\t\tresult = true;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn result;\n\t};\n}));\n","(function(self) {\n  'use strict';\n\n  if (self.fetch) {\n    return\n  }\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob: 'FileReader' in self && 'Blob' in self && (function() {\n      try {\n        new Blob()\n        return true\n      } catch(e) {\n        return false\n      }\n    })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ]\n\n    var isDataView = function(obj) {\n      return obj && DataView.prototype.isPrototypeOf(obj)\n    }\n\n    var isArrayBufferView = ArrayBuffer.isView || function(obj) {\n      return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n    }\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name)\n    }\n    if (/[^a-z0-9\\-#$%&'*+.\\^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value)\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift()\n        return {done: value === undefined, value: value}\n      }\n    }\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      }\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {}\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value)\n      }, this)\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1])\n      }, this)\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name])\n      }, this)\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name)\n    value = normalizeValue(value)\n    var oldValue = this.map[name]\n    this.map[name] = oldValue ? oldValue+','+value : value\n  }\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)]\n  }\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name)\n    return this.has(name) ? this.map[name] : null\n  }\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  }\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value)\n  }\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this)\n      }\n    }\n  }\n\n  Headers.prototype.keys = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push(name) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.values = function() {\n    var items = []\n    this.forEach(function(value) { items.push(value) })\n    return iteratorFor(items)\n  }\n\n  Headers.prototype.entries = function() {\n    var items = []\n    this.forEach(function(value, name) { items.push([name, value]) })\n    return iteratorFor(items)\n  }\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result)\n      }\n      reader.onerror = function() {\n        reject(reader.error)\n      }\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsArrayBuffer(blob)\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader()\n    var promise = fileReaderReady(reader)\n    reader.readAsText(blob)\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf)\n    var chars = new Array(view.length)\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i])\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength)\n      view.set(new Uint8Array(buf))\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false\n\n    this._initBody = function(body) {\n      this._bodyInit = body\n      if (!body) {\n        this._bodyText = ''\n      } else if (typeof body === 'string') {\n        this._bodyText = body\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString()\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer)\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer])\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body)\n      } else {\n        throw new Error('unsupported BodyInit type')\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8')\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type)\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8')\n        }\n      }\n    }\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this)\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      }\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      }\n    }\n\n    this.text = function() {\n      var rejected = consumed(this)\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    }\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      }\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    }\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT']\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase()\n    return (methods.indexOf(upcased) > -1) ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {}\n    var body = options.body\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url\n      this.credentials = input.credentials\n      if (!options.headers) {\n        this.headers = new Headers(input.headers)\n      }\n      this.method = input.method\n      this.mode = input.mode\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit\n        input.bodyUsed = true\n      }\n    } else {\n      this.url = String(input)\n    }\n\n    this.credentials = options.credentials || this.credentials || 'omit'\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers)\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET')\n    this.mode = options.mode || this.mode || null\n    this.referrer = null\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body)\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, { body: this._bodyInit })\n  }\n\n  function decode(body) {\n    var form = new FormData()\n    body.trim().split('&').forEach(function(bytes) {\n      if (bytes) {\n        var split = bytes.split('=')\n        var name = split.shift().replace(/\\+/g, ' ')\n        var value = split.join('=').replace(/\\+/g, ' ')\n        form.append(decodeURIComponent(name), decodeURIComponent(value))\n      }\n    })\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers()\n    rawHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':')\n      var key = parts.shift().trim()\n      if (key) {\n        var value = parts.join(':').trim()\n        headers.append(key, value)\n      }\n    })\n    return headers\n  }\n\n  Body.call(Request.prototype)\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {}\n    }\n\n    this.type = 'default'\n    this.status = 'status' in options ? options.status : 200\n    this.ok = this.status >= 200 && this.status < 300\n    this.statusText = 'statusText' in options ? options.statusText : 'OK'\n    this.headers = new Headers(options.headers)\n    this.url = options.url || ''\n    this._initBody(bodyInit)\n  }\n\n  Body.call(Response.prototype)\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  }\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''})\n    response.type = 'error'\n    return response\n  }\n\n  var redirectStatuses = [301, 302, 303, 307, 308]\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  }\n\n  self.Headers = Headers\n  self.Request = Request\n  self.Response = Response\n\n  self.fetch = function(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init)\n      var xhr = new XMLHttpRequest()\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        }\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL')\n        var body = 'response' in xhr ? xhr.response : xhr.responseText\n        resolve(new Response(body, options))\n      }\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'))\n      }\n\n      xhr.open(request.method, request.url, true)\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob'\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value)\n      })\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit)\n    })\n  }\n  self.fetch.polyfill = true\n})(typeof self !== 'undefined' ? self : this);\n","const controller = require('./penguin-controller');\nconst view = require('./penguin-view');\nconst model = require('./penguin-model');\n\nconst modeWithUrl = () =>\n  Object.assign({},\n    model, { fetchData: model.fetchData('http://localhost:4000/api') });\n\nconst viewWithRoot = () =>\n  Object.assign({},\n    view, { initPenguinView: view.initPenguinView({ id: 'root' }) });\n\nconst onDOMContentLoaded = () => {\n  controller.initialize(modeWithUrl(), viewWithRoot());\n};\n\nwindow.document.addEventListener('DOMContentLoaded', onDOMContentLoaded);\n","const dataUpdateListener = ({ updatePenguin }) => (topic, { data, index }) => {\n  updatePenguin(data[index]);\n};\n\nconst subscribeModelListeners = (penguinView = {}, subscribe = () => {}, dataUpdate = '') => {\n  subscribe([\n    { topic: dataUpdate, callback: dataUpdateListener(penguinView) },\n  ]);\n};\n\nconst clickEvtListener = ({ updateIndex }) => ({ target }) => {\n  if (target.nodeName !== 'BUTTON') return;\n\n  const getIndex = {\n    'next-penguin': () => 1,\n    'previous-penguin': () => -1,\n  };\n\n  updateIndex(getIndex[target.id]());\n};\n\nconst initialize = (penguinModel = {}, penguinView = {}) => {\n  penguinView.initPenguinView();\n  penguinView.penguinControlls();\n  penguinView.addEventClickListener(clickEvtListener(penguinModel));\n\n  subscribeModelListeners(\n    penguinView,\n    penguinModel.subscribe,\n    penguinModel.DATA_UPDATE);\n\n  penguinModel.fetchData();\n};\n\nmodule.exports = {\n  initialize,\n};\n","const PubSub = require('pubsub-js');\nconst fetch = require('isomorphic-fetch');\n\nconst DATA_UPDATE = 'data.updated';\n\nlet model = {\n  data: [],\n  index: 0,\n};\n\nconst getModel = () => Object.assign({}, model);\n\nconst setData = (data) => {\n  model = Object.assign({}, model, { data });\n  PubSub.publish(DATA_UPDATE, getModel());\n};\n\nconst updateIndex = (idx) => {\n  const { index, data } = getModel();\n  if (index + idx < 0) return;\n  if (index + idx > data.length - 1) return;\n\n  model = Object.assign({}, model, { index: index + idx });\n  PubSub.publish(DATA_UPDATE, getModel());\n};\n\nconst subscribe = (subscribers) => {\n  subscribers.forEach(({ topic, callback }) => {\n    PubSub.subscribe(topic, callback);\n  });\n};\n\nconst fetchData = endpoint => () =>\n  fetch(`${endpoint}/data`)\n    .then((resp) => {\n      if (resp.status === 200) {\n        return resp.json();\n      }\n      return Promise.reject(new Error(`error:${resp.status}`));\n    })\n    .then(setData)\n    .then(() => 'done')\n    .catch((err) => {\n      console.error(err.message);\n    });\n\nmodule.exports = {\n  fetchData,\n  updateIndex,\n  subscribe,\n  DATA_UPDATE,\n};\n","const $qs = selector => window.document.querySelector.bind(window.document)(selector);\n\nconst addEventClickListener = (clickEvtListner) => {\n  $qs('#penguinView').addEventListener('click', clickEvtListner);\n};\n\nconst emptyElement = ($elm) => {\n  $elm.innerHTML = ''; // eslint-disable-line  no-param-reassign\n};\n\nconst penguinTitle = ({ name }) => {\n  const $header = $qs('#penguinView header');\n  const $h3 = window.document.createElement('h3');\n  $h3.appendChild(window.document.createTextNode(name));\n  emptyElement($header);\n  $header.appendChild($h3);\n};\n\nconst penguinImage = ({ imageUrl, name }) => {\n  const $penguinImage = $qs('#penguinView .penguin-image');\n  const $img = window.document.createElement('img');\n  $img.setAttribute('src', imageUrl);\n  $img.setAttribute('alt', `image ${name}`);\n  emptyElement($penguinImage);\n  $penguinImage.appendChild($img);\n};\n\nconst penguinInfo = ({ size, favoriteFood }) => {\n  const $penguinInfo = $qs('#penguinView .penguin-info');\n  const fragment = window.document.createDocumentFragment();\n\n  [{ label: 'Size: ', data: size },\n    { label: 'Favorite food: ', data: favoriteFood },\n  ].forEach((item) => {\n    const $p = window.document.createElement('p');\n    const $span = window.document.createElement('span');\n\n    $span.appendChild(window.document.createTextNode(item.label));\n    $p.appendChild($span);\n\n    $p.appendChild(window.document.createTextNode(item.data));\n    fragment.appendChild($p);\n  });\n\n  emptyElement($penguinInfo);\n  $penguinInfo.appendChild(fragment);\n};\n\nconst penguinControlls = () => {\n  const $penguinControlls = $qs('#penguinView .penguin-controlls');\n  const fragment = window.document.createDocumentFragment();\n\n  ['previous', 'next'].forEach((item) => {\n    const $button = window.document.createElement('button');\n    $button.setAttribute('id', `${item}-penguin`);\n    $button.appendChild(window.document.createTextNode(item));\n    fragment.appendChild($button);\n  });\n\n  emptyElement($penguinControlls);\n  $penguinControlls.appendChild(fragment);\n};\n\nconst initPenguinView = ({ id }) => () => {\n  const $root = $qs(`#${id}`);\n\n  const $penguinView = window.document.createElement('div');\n  $penguinView.setAttribute('id', 'penguinView');\n\n  const $header = window.document.createElement('header');\n\n  $penguinView.appendChild($header);\n\n  ['penguin-image', 'penguin-info', 'penguin-controlls']\n    .forEach((item) => {\n      const $section = window.document.createElement('section');\n      $section.classList.add(item);\n      $penguinView.appendChild($section);\n    });\n\n  emptyElement($root);\n\n  $root.appendChild($penguinView);\n};\n\nconst updatePenguin = (props) => {\n  penguinTitle(props);\n  penguinImage(props);\n  penguinInfo(props);\n};\n\nmodule.exports = {\n  initPenguinView,\n  penguinTitle,\n  penguinImage,\n  penguinInfo,\n  penguinControlls,\n  updatePenguin,\n  addEventClickListener,\n};\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJub2RlX21vZHVsZXMvaXNvbW9ycGhpYy1mZXRjaC9mZXRjaC1ucG0tYnJvd3NlcmlmeS5qcyIsIm5vZGVfbW9kdWxlcy9wdWJzdWItanMvc3JjL3B1YnN1Yi5qcyIsIm5vZGVfbW9kdWxlcy93aGF0d2ctZmV0Y2gvZmV0Y2guanMiLCJzcmMvc2NyaXB0cy9pbmRleC5qcyIsInNyYy9zY3JpcHRzL3Blbmd1aW4tY29udHJvbGxlci5qcyIsInNyYy9zY3JpcHRzL3Blbmd1aW4tbW9kZWwuanMiLCJzcmMvc2NyaXB0cy9wZW5ndWluLXZpZXcuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUNBQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNOQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsUUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FB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UUFBTSxVQUFVLE9BQU8sUUFBUCxDQUFnQixhQUFoQixDQUE4QixRQUE5QixDQUFoQjs7QUFFQSxpQkFBYSxXQUFiLENBQXlCLE9BQXpCOztBQUVBLEtBQUMsZUFBRCxFQUFrQixjQUFsQixFQUFrQyxtQkFBbEMsRUFDRyxPQURILENBQ1csVUFBQyxJQUFELEVBQVU7QUFDakIsVUFBTSxXQUFXLE9BQU8sUUFBUCxDQUFnQixhQUFoQixDQUE4QixTQUE5QixDQUFqQjtBQUNBLGVBQVMsU0FBVCxDQUFtQixHQUFuQixDQUF1QixJQUF2QjtBQUNBLG1CQUFhLFdBQWIsQ0FBeUIsUUFBekI7QUFDRCxLQUxIOztBQU9BLGlCQUFhLEtBQWI7O0FBRUEsVUFBTSxXQUFOLENBQWtCLFlBQWxCO0FBQ0QsR0FwQnVCO0FBQUEsQ0FBeEI7O0FBc0JBLElBQU0sZ0JBQWdCLFNBQWhCLGFBQWdCLENBQUMsS0FBRCxFQUFXO0FBQy9CLGVBQWEsS0FBYjtBQUNBLGVBQWEsS0FBYjtBQUNBLGNBQVksS0FBWjtBQUNELENBSkQ7O0FBTUEsT0FBTyxPQUFQLEdBQWlCO0FBQ2Ysa0NBRGU7QUFFZiw0QkFGZTtBQUdmLDRCQUhlO0FBSWYsMEJBSmU7QUFLZixvQ0FMZTtBQU1mLDhCQU5lO0FBT2Y7QUFQZSxDQUFqQiIsImZpbGUiOiJnZW5lcmF0ZWQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt2YXIgZj1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpO3Rocm93IGYuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixmfXZhciBsPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChsLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGwsbC5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkiLCIvLyB0aGUgd2hhdHdnLWZldGNoIHBvbHlmaWxsIGluc3RhbGxzIHRoZSBmZXRjaCgpIGZ1bmN0aW9uXG4vLyBvbiB0aGUgZ2xvYmFsIG9iamVjdCAod2luZG93IG9yIHNlbGYpXG4vL1xuLy8gUmV0dXJuIHRoYXQgYXMgdGhlIGV4cG9ydCBmb3IgdXNlIGluIFdlYnBhY2ssIEJyb3dzZXJpZnkgZXRjLlxucmVxdWlyZSgnd2hhdHdnLWZldGNoJyk7XG5tb2R1bGUuZXhwb3J0cyA9IHNlbGYuZmV0Y2guYmluZChzZWxmKTtcbiIsIi8qXG5Db3B5cmlnaHQgKGMpIDIwMTAsMjAxMSwyMDEyLDIwMTMsMjAxNCBNb3JnYW4gUm9kZXJpY2sgaHR0cDovL3JvZGVyaWNrLmRrXG5MaWNlbnNlOiBNSVQgLSBodHRwOi8vbXJnbnJkcmNrLm1pdC1saWNlbnNlLm9yZ1xuXG5odHRwczovL2dpdGh1Yi5jb20vbXJvZGVyaWNrL1B1YlN1YkpTXG4qL1xuKGZ1bmN0aW9uIChyb290LCBmYWN0b3J5KXtcblx0J3VzZSBzdHJpY3QnO1xuXG5cdHZhciBQdWJTdWIgPSB7fTtcblx0cm9vdC5QdWJTdWIgPSBQdWJTdWI7XG5cdGZhY3RvcnkoUHViU3ViKTtcblxuXHQvLyBBTUQgc3VwcG9ydFxuXHRpZiAodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKXtcblx0XHRkZWZpbmUoZnVuY3Rpb24oKSB7IHJldHVybiBQdWJTdWI7IH0pO1xuXG5cdC8vIENvbW1vbkpTIGFuZCBOb2RlLmpzIG1vZHVsZSBzdXBwb3J0XG5cdH0gZWxzZSBpZiAodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKXtcblx0XHRpZiAobW9kdWxlICE9PSB1bmRlZmluZWQgJiYgbW9kdWxlLmV4cG9ydHMpIHtcblx0XHRcdGV4cG9ydHMgPSBtb2R1bGUuZXhwb3J0cyA9IFB1YlN1YjsgLy8gTm9kZS5qcyBzcGVjaWZpYyBgbW9kdWxlLmV4cG9ydHNgXG5cdFx0fVxuXHRcdGV4cG9ydHMuUHViU3ViID0gUHViU3ViOyAvLyBDb21tb25KUyBtb2R1bGUgMS4xLjEgc3BlY1xuXHRcdG1vZHVsZS5leHBvcnRzID0gZXhwb3J0cyA9IFB1YlN1YjsgLy8gQ29tbW9uSlNcblx0fVxuXG59KCggdHlwZW9mIHdpbmRvdyA9PT0gJ29iamVjdCcgJiYgd2luZG93ICkgfHwgdGhpcywgZnVuY3Rpb24gKFB1YlN1Yil7XG5cdCd1c2Ugc3RyaWN0JztcblxuXHR2YXIgbWVzc2FnZXMgPSB7fSxcblx0XHRsYXN0VWlkID0gLTE7XG5cblx0ZnVuY3Rpb24gaGFzS2V5cyhvYmope1xuXHRcdHZhciBrZXk7XG5cblx0XHRmb3IgKGtleSBpbiBvYmope1xuXHRcdFx0aWYgKCBvYmouaGFzT3duUHJvcGVydHkoa2V5KSApe1xuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9XG5cblx0LyoqXG5cdCAqXHRSZXR1cm5zIGEgZnVuY3Rpb24gdGhhdCB0aHJvd3MgdGhlIHBhc3NlZCBleGNlcHRpb24sIGZvciB1c2UgYXMgYXJndW1lbnQgZm9yIHNldFRpbWVvdXRcblx0ICpcdEBwYXJhbSB7IE9iamVjdCB9IGV4IEFuIEVycm9yIG9iamVjdFxuXHQgKi9cblx0ZnVuY3Rpb24gdGhyb3dFeGNlcHRpb24oIGV4ICl7XG5cdFx0cmV0dXJuIGZ1bmN0aW9uIHJlVGhyb3dFeGNlcHRpb24oKXtcblx0XHRcdHRocm93IGV4O1xuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBjYWxsU3Vic2NyaWJlcldpdGhEZWxheWVkRXhjZXB0aW9ucyggc3Vic2NyaWJlciwgbWVzc2FnZSwgZGF0YSApe1xuXHRcdHRyeSB7XG5cdFx0XHRzdWJzY3JpYmVyKCBtZXNzYWdlLCBkYXRhICk7XG5cdFx0fSBjYXRjaCggZXggKXtcblx0XHRcdHNldFRpbWVvdXQoIHRocm93RXhjZXB0aW9uKCBleCApLCAwKTtcblx0XHR9XG5cdH1cblxuXHRmdW5jdGlvbiBjYWxsU3Vic2NyaWJlcldpdGhJbW1lZGlhdGVFeGNlcHRpb25zKCBzdWJzY3JpYmVyLCBtZXNzYWdlLCBkYXRhICl7XG5cdFx0c3Vic2NyaWJlciggbWVzc2FnZSwgZGF0YSApO1xuXHR9XG5cblx0ZnVuY3Rpb24gZGVsaXZlck1lc3NhZ2UoIG9yaWdpbmFsTWVzc2FnZSwgbWF0Y2hlZE1lc3NhZ2UsIGRhdGEsIGltbWVkaWF0ZUV4Y2VwdGlvbnMgKXtcblx0XHR2YXIgc3Vic2NyaWJlcnMgPSBtZXNzYWdlc1ttYXRjaGVkTWVzc2FnZV0sXG5cdFx0XHRjYWxsU3Vic2NyaWJlciA9IGltbWVkaWF0ZUV4Y2VwdGlvbnMgPyBjYWxsU3Vic2NyaWJlcldpdGhJbW1lZGlhdGVFeGNlcHRpb25zIDogY2FsbFN1YnNjcmliZXJXaXRoRGVsYXllZEV4Y2VwdGlvbnMsXG5cdFx0XHRzO1xuXG5cdFx0aWYgKCAhbWVzc2FnZXMuaGFzT3duUHJvcGVydHkoIG1hdGNoZWRNZXNzYWdlICkgKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yIChzIGluIHN1YnNjcmliZXJzKXtcblx0XHRcdGlmICggc3Vic2NyaWJlcnMuaGFzT3duUHJvcGVydHkocykpe1xuXHRcdFx0XHRjYWxsU3Vic2NyaWJlciggc3Vic2NyaWJlcnNbc10sIG9yaWdpbmFsTWVzc2FnZSwgZGF0YSApO1xuXHRcdFx0fVxuXHRcdH1cblx0fVxuXG5cdGZ1bmN0aW9uIGNyZWF0ZURlbGl2ZXJ5RnVuY3Rpb24oIG1lc3NhZ2UsIGRhdGEsIGltbWVkaWF0ZUV4Y2VwdGlvbnMgKXtcblx0XHRyZXR1cm4gZnVuY3Rpb24gZGVsaXZlck5hbWVzcGFjZWQoKXtcblx0XHRcdHZhciB0b3BpYyA9IFN0cmluZyggbWVzc2FnZSApLFxuXHRcdFx0XHRwb3NpdGlvbiA9IHRvcGljLmxhc3RJbmRleE9mKCAnLicgKTtcblxuXHRcdFx0Ly8gZGVsaXZlciB0aGUgbWVzc2FnZSBhcyBpdCBpcyBub3dcblx0XHRcdGRlbGl2ZXJNZXNzYWdlKG1lc3NhZ2UsIG1lc3NhZ2UsIGRhdGEsIGltbWVkaWF0ZUV4Y2VwdGlvbnMpO1xuXG5cdFx0XHQvLyB0cmltIHRoZSBoaWVyYXJjaHkgYW5kIGRlbGl2ZXIgbWVzc2FnZSB0byBlYWNoIGxldmVsXG5cdFx0XHR3aGlsZSggcG9zaXRpb24gIT09IC0xICl7XG5cdFx0XHRcdHRvcGljID0gdG9waWMuc3Vic3RyKCAwLCBwb3NpdGlvbiApO1xuXHRcdFx0XHRwb3NpdGlvbiA9IHRvcGljLmxhc3RJbmRleE9mKCcuJyk7XG5cdFx0XHRcdGRlbGl2ZXJNZXNzYWdlKCBtZXNzYWdlLCB0b3BpYywgZGF0YSwgaW1tZWRpYXRlRXhjZXB0aW9ucyApO1xuXHRcdFx0fVxuXHRcdH07XG5cdH1cblxuXHRmdW5jdGlvbiBtZXNzYWdlSGFzU3Vic2NyaWJlcnMoIG1lc3NhZ2UgKXtcblx0XHR2YXIgdG9waWMgPSBTdHJpbmcoIG1lc3NhZ2UgKSxcblx0XHRcdGZvdW5kID0gQm9vbGVhbihtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eSggdG9waWMgKSAmJiBoYXNLZXlzKG1lc3NhZ2VzW3RvcGljXSkpLFxuXHRcdFx0cG9zaXRpb24gPSB0b3BpYy5sYXN0SW5kZXhPZiggJy4nICk7XG5cblx0XHR3aGlsZSAoICFmb3VuZCAmJiBwb3NpdGlvbiAhPT0gLTEgKXtcblx0XHRcdHRvcGljID0gdG9waWMuc3Vic3RyKCAwLCBwb3NpdGlvbiApO1xuXHRcdFx0cG9zaXRpb24gPSB0b3BpYy5sYXN0SW5kZXhPZiggJy4nICk7XG5cdFx0XHRmb3VuZCA9IEJvb2xlYW4obWVzc2FnZXMuaGFzT3duUHJvcGVydHkoIHRvcGljICkgJiYgaGFzS2V5cyhtZXNzYWdlc1t0b3BpY10pKTtcblx0XHR9XG5cblx0XHRyZXR1cm4gZm91bmQ7XG5cdH1cblxuXHRmdW5jdGlvbiBwdWJsaXNoKCBtZXNzYWdlLCBkYXRhLCBzeW5jLCBpbW1lZGlhdGVFeGNlcHRpb25zICl7XG5cdFx0dmFyIGRlbGl2ZXIgPSBjcmVhdGVEZWxpdmVyeUZ1bmN0aW9uKCBtZXNzYWdlLCBkYXRhLCBpbW1lZGlhdGVFeGNlcHRpb25zICksXG5cdFx0XHRoYXNTdWJzY3JpYmVycyA9IG1lc3NhZ2VIYXNTdWJzY3JpYmVycyggbWVzc2FnZSApO1xuXG5cdFx0aWYgKCAhaGFzU3Vic2NyaWJlcnMgKXtcblx0XHRcdHJldHVybiBmYWxzZTtcblx0XHR9XG5cblx0XHRpZiAoIHN5bmMgPT09IHRydWUgKXtcblx0XHRcdGRlbGl2ZXIoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2V0VGltZW91dCggZGVsaXZlciwgMCApO1xuXHRcdH1cblx0XHRyZXR1cm4gdHJ1ZTtcblx0fVxuXG5cdC8qKlxuXHQgKlx0UHViU3ViLnB1Ymxpc2goIG1lc3NhZ2VbLCBkYXRhXSApIC0+IEJvb2xlYW5cblx0ICpcdC0gbWVzc2FnZSAoU3RyaW5nKTogVGhlIG1lc3NhZ2UgdG8gcHVibGlzaFxuXHQgKlx0LSBkYXRhOiBUaGUgZGF0YSB0byBwYXNzIHRvIHN1YnNjcmliZXJzXG5cdCAqXHRQdWJsaXNoZXMgdGhlIHRoZSBtZXNzYWdlLCBwYXNzaW5nIHRoZSBkYXRhIHRvIGl0J3Mgc3Vic2NyaWJlcnNcblx0KiovXG5cdFB1YlN1Yi5wdWJsaXNoID0gZnVuY3Rpb24oIG1lc3NhZ2UsIGRhdGEgKXtcblx0XHRyZXR1cm4gcHVibGlzaCggbWVzc2FnZSwgZGF0YSwgZmFsc2UsIFB1YlN1Yi5pbW1lZGlhdGVFeGNlcHRpb25zICk7XG5cdH07XG5cblx0LyoqXG5cdCAqXHRQdWJTdWIucHVibGlzaFN5bmMoIG1lc3NhZ2VbLCBkYXRhXSApIC0+IEJvb2xlYW5cblx0ICpcdC0gbWVzc2FnZSAoU3RyaW5nKTogVGhlIG1lc3NhZ2UgdG8gcHVibGlzaFxuXHQgKlx0LSBkYXRhOiBUaGUgZGF0YSB0byBwYXNzIHRvIHN1YnNjcmliZXJzXG5cdCAqXHRQdWJsaXNoZXMgdGhlIHRoZSBtZXNzYWdlIHN5bmNocm9ub3VzbHksIHBhc3NpbmcgdGhlIGRhdGEgdG8gaXQncyBzdWJzY3JpYmVyc1xuXHQqKi9cblx0UHViU3ViLnB1Ymxpc2hTeW5jID0gZnVuY3Rpb24oIG1lc3NhZ2UsIGRhdGEgKXtcblx0XHRyZXR1cm4gcHVibGlzaCggbWVzc2FnZSwgZGF0YSwgdHJ1ZSwgUHViU3ViLmltbWVkaWF0ZUV4Y2VwdGlvbnMgKTtcblx0fTtcblxuXHQvKipcblx0ICpcdFB1YlN1Yi5zdWJzY3JpYmUoIG1lc3NhZ2UsIGZ1bmMgKSAtPiBTdHJpbmdcblx0ICpcdC0gbWVzc2FnZSAoU3RyaW5nKTogVGhlIG1lc3NhZ2UgdG8gc3Vic2NyaWJlIHRvXG5cdCAqXHQtIGZ1bmMgKEZ1bmN0aW9uKTogVGhlIGZ1bmN0aW9uIHRvIGNhbGwgd2hlbiBhIG5ldyBtZXNzYWdlIGlzIHB1Ymxpc2hlZFxuXHQgKlx0U3Vic2NyaWJlcyB0aGUgcGFzc2VkIGZ1bmN0aW9uIHRvIHRoZSBwYXNzZWQgbWVzc2FnZS4gRXZlcnkgcmV0dXJuZWQgdG9rZW4gaXMgdW5pcXVlIGFuZCBzaG91bGQgYmUgc3RvcmVkIGlmXG5cdCAqXHR5b3UgbmVlZCB0byB1bnN1YnNjcmliZVxuXHQqKi9cblx0UHViU3ViLnN1YnNjcmliZSA9IGZ1bmN0aW9uKCBtZXNzYWdlLCBmdW5jICl7XG5cdFx0aWYgKCB0eXBlb2YgZnVuYyAhPT0gJ2Z1bmN0aW9uJyl7XG5cdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0fVxuXG5cdFx0Ly8gbWVzc2FnZSBpcyBub3QgcmVnaXN0ZXJlZCB5ZXRcblx0XHRpZiAoICFtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eSggbWVzc2FnZSApICl7XG5cdFx0XHRtZXNzYWdlc1ttZXNzYWdlXSA9IHt9O1xuXHRcdH1cblxuXHRcdC8vIGZvcmNpbmcgdG9rZW4gYXMgU3RyaW5nLCB0byBhbGxvdyBmb3IgZnV0dXJlIGV4cGFuc2lvbnMgd2l0aG91dCBicmVha2luZyB1c2FnZVxuXHRcdC8vIGFuZCBhbGxvdyBmb3IgZWFzeSB1c2UgYXMga2V5IG5hbWVzIGZvciB0aGUgJ21lc3NhZ2VzJyBvYmplY3Rcblx0XHR2YXIgdG9rZW4gPSAndWlkXycgKyBTdHJpbmcoKytsYXN0VWlkKTtcblx0XHRtZXNzYWdlc1ttZXNzYWdlXVt0b2tlbl0gPSBmdW5jO1xuXG5cdFx0Ly8gcmV0dXJuIHRva2VuIGZvciB1bnN1YnNjcmliaW5nXG5cdFx0cmV0dXJuIHRva2VuO1xuXHR9O1xuXG5cdC8qIFB1YmxpYzogQ2xlYXJzIGFsbCBzdWJzY3JpcHRpb25zXG5cdCAqL1xuXHRQdWJTdWIuY2xlYXJBbGxTdWJzY3JpcHRpb25zID0gZnVuY3Rpb24gY2xlYXJBbGxTdWJzY3JpcHRpb25zKCl7XG5cdFx0bWVzc2FnZXMgPSB7fTtcblx0fTtcblxuXHQvKlB1YmxpYzogQ2xlYXIgc3Vic2NyaXB0aW9ucyBieSB0aGUgdG9waWNcblx0Ki9cblx0UHViU3ViLmNsZWFyU3Vic2NyaXB0aW9ucyA9IGZ1bmN0aW9uIGNsZWFyU3Vic2NyaXB0aW9ucyh0b3BpYyl7XG5cdFx0dmFyIG07XG5cdFx0Zm9yIChtIGluIG1lc3NhZ2VzKXtcblx0XHRcdGlmIChtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eShtKSAmJiBtLmluZGV4T2YodG9waWMpID09PSAwKXtcblx0XHRcdFx0ZGVsZXRlIG1lc3NhZ2VzW21dO1xuXHRcdFx0fVxuXHRcdH1cblx0fTtcblxuXHQvKiBQdWJsaWM6IHJlbW92ZXMgc3Vic2NyaXB0aW9ucy5cblx0ICogV2hlbiBwYXNzZWQgYSB0b2tlbiwgcmVtb3ZlcyBhIHNwZWNpZmljIHN1YnNjcmlwdGlvbi5cblx0ICogV2hlbiBwYXNzZWQgYSBmdW5jdGlvbiwgcmVtb3ZlcyBhbGwgc3Vic2NyaXB0aW9ucyBmb3IgdGhhdCBmdW5jdGlvblxuXHQgKiBXaGVuIHBhc3NlZCBhIHRvcGljLCByZW1vdmVzIGFsbCBzdWJzY3JpcHRpb25zIGZvciB0aGF0IHRvcGljIChoaWVyYXJjaHkpXG5cdCAqXG5cdCAqIHZhbHVlIC0gQSB0b2tlbiwgZnVuY3Rpb24gb3IgdG9waWMgdG8gdW5zdWJzY3JpYmUuXG5cdCAqXG5cdCAqIEV4YW1wbGVzXG5cdCAqXG5cdCAqXHRcdC8vIEV4YW1wbGUgMSAtIHVuc3Vic2NyaWJpbmcgd2l0aCBhIHRva2VuXG5cdCAqXHRcdHZhciB0b2tlbiA9IFB1YlN1Yi5zdWJzY3JpYmUoJ215dG9waWMnLCBteUZ1bmMpO1xuXHQgKlx0XHRQdWJTdWIudW5zdWJzY3JpYmUodG9rZW4pO1xuXHQgKlxuXHQgKlx0XHQvLyBFeGFtcGxlIDIgLSB1bnN1YnNjcmliaW5nIHdpdGggYSBmdW5jdGlvblxuXHQgKlx0XHRQdWJTdWIudW5zdWJzY3JpYmUobXlGdW5jKTtcblx0ICpcblx0ICpcdFx0Ly8gRXhhbXBsZSAzIC0gdW5zdWJzY3JpYmluZyBhIHRvcGljXG5cdCAqXHRcdFB1YlN1Yi51bnN1YnNjcmliZSgnbXl0b3BpYycpO1xuXHQgKi9cblx0UHViU3ViLnVuc3Vic2NyaWJlID0gZnVuY3Rpb24odmFsdWUpe1xuXHRcdHZhciBkZXNjZW5kYW50VG9waWNFeGlzdHMgPSBmdW5jdGlvbih0b3BpYykge1xuXHRcdFx0XHR2YXIgbTtcblx0XHRcdFx0Zm9yICggbSBpbiBtZXNzYWdlcyApe1xuXHRcdFx0XHRcdGlmICggbWVzc2FnZXMuaGFzT3duUHJvcGVydHkobSkgJiYgbS5pbmRleE9mKHRvcGljKSA9PT0gMCApe1xuXHRcdFx0XHRcdFx0Ly8gYSBkZXNjZW5kYW50IG9mIHRoZSB0b3BpYyBleGlzdHM6XG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRyZXR1cm4gZmFsc2U7XG5cdFx0XHR9LFxuXHRcdFx0aXNUb3BpYyAgICA9IHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycgJiYgKCBtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eSh2YWx1ZSkgfHwgZGVzY2VuZGFudFRvcGljRXhpc3RzKHZhbHVlKSApLFxuXHRcdFx0aXNUb2tlbiAgICA9ICFpc1RvcGljICYmIHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycsXG5cdFx0XHRpc0Z1bmN0aW9uID0gdHlwZW9mIHZhbHVlID09PSAnZnVuY3Rpb24nLFxuXHRcdFx0cmVzdWx0ID0gZmFsc2UsXG5cdFx0XHRtLCBtZXNzYWdlLCB0O1xuXG5cdFx0aWYgKGlzVG9waWMpe1xuXHRcdFx0UHViU3ViLmNsZWFyU3Vic2NyaXB0aW9ucyh2YWx1ZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Zm9yICggbSBpbiBtZXNzYWdlcyApe1xuXHRcdFx0aWYgKCBtZXNzYWdlcy5oYXNPd25Qcm9wZXJ0eSggbSApICl7XG5cdFx0XHRcdG1lc3NhZ2UgPSBtZXNzYWdlc1ttXTtcblxuXHRcdFx0XHRpZiAoIGlzVG9rZW4gJiYgbWVzc2FnZVt2YWx1ZV0gKXtcblx0XHRcdFx0XHRkZWxldGUgbWVzc2FnZVt2YWx1ZV07XG5cdFx0XHRcdFx0cmVzdWx0ID0gdmFsdWU7XG5cdFx0XHRcdFx0Ly8gdG9rZW5zIGFyZSB1bmlxdWUsIHNvIHdlIGNhbiBqdXN0IHN0b3AgaGVyZVxuXHRcdFx0XHRcdGJyZWFrO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0aWYgKGlzRnVuY3Rpb24pIHtcblx0XHRcdFx0XHRmb3IgKCB0IGluIG1lc3NhZ2UgKXtcblx0XHRcdFx0XHRcdGlmIChtZXNzYWdlLmhhc093blByb3BlcnR5KHQpICYmIG1lc3NhZ2VbdF0gPT09IHZhbHVlKXtcblx0XHRcdFx0XHRcdFx0ZGVsZXRlIG1lc3NhZ2VbdF07XG5cdFx0XHRcdFx0XHRcdHJlc3VsdCA9IHRydWU7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIHJlc3VsdDtcblx0fTtcbn0pKTtcbiIsIihmdW5jdGlvbihzZWxmKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBpZiAoc2VsZi5mZXRjaCkge1xuICAgIHJldHVyblxuICB9XG5cbiAgdmFyIHN1cHBvcnQgPSB7XG4gICAgc2VhcmNoUGFyYW1zOiAnVVJMU2VhcmNoUGFyYW1zJyBpbiBzZWxmLFxuICAgIGl0ZXJhYmxlOiAnU3ltYm9sJyBpbiBzZWxmICYmICdpdGVyYXRvcicgaW4gU3ltYm9sLFxuICAgIGJsb2I6ICdGaWxlUmVhZGVyJyBpbiBzZWxmICYmICdCbG9iJyBpbiBzZWxmICYmIChmdW5jdGlvbigpIHtcbiAgICAgIHRyeSB7XG4gICAgICAgIG5ldyBCbG9iKClcbiAgICAgICAgcmV0dXJuIHRydWVcbiAgICAgIH0gY2F0Y2goZSkge1xuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgIH1cbiAgICB9KSgpLFxuICAgIGZvcm1EYXRhOiAnRm9ybURhdGEnIGluIHNlbGYsXG4gICAgYXJyYXlCdWZmZXI6ICdBcnJheUJ1ZmZlcicgaW4gc2VsZlxuICB9XG5cbiAgaWYgKHN1cHBvcnQuYXJyYXlCdWZmZXIpIHtcbiAgICB2YXIgdmlld0NsYXNzZXMgPSBbXG4gICAgICAnW29iamVjdCBJbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4QXJyYXldJyxcbiAgICAgICdbb2JqZWN0IFVpbnQ4Q2xhbXBlZEFycmF5XScsXG4gICAgICAnW29iamVjdCBJbnQxNkFycmF5XScsXG4gICAgICAnW29iamVjdCBVaW50MTZBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgSW50MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgVWludDMyQXJyYXldJyxcbiAgICAgICdbb2JqZWN0IEZsb2F0MzJBcnJheV0nLFxuICAgICAgJ1tvYmplY3QgRmxvYXQ2NEFycmF5XSdcbiAgICBdXG5cbiAgICB2YXIgaXNEYXRhVmlldyA9IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiBEYXRhVmlldy5wcm90b3R5cGUuaXNQcm90b3R5cGVPZihvYmopXG4gICAgfVxuXG4gICAgdmFyIGlzQXJyYXlCdWZmZXJWaWV3ID0gQXJyYXlCdWZmZXIuaXNWaWV3IHx8IGZ1bmN0aW9uKG9iaikge1xuICAgICAgcmV0dXJuIG9iaiAmJiB2aWV3Q2xhc3Nlcy5pbmRleE9mKE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChvYmopKSA+IC0xXG4gICAgfVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplTmFtZShuYW1lKSB7XG4gICAgaWYgKHR5cGVvZiBuYW1lICE9PSAnc3RyaW5nJykge1xuICAgICAgbmFtZSA9IFN0cmluZyhuYW1lKVxuICAgIH1cbiAgICBpZiAoL1teYS16MC05XFwtIyQlJicqKy5cXF5fYHx+XS9pLnRlc3QobmFtZSkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0ludmFsaWQgY2hhcmFjdGVyIGluIGhlYWRlciBmaWVsZCBuYW1lJylcbiAgICB9XG4gICAgcmV0dXJuIG5hbWUudG9Mb3dlckNhc2UoKVxuICB9XG5cbiAgZnVuY3Rpb24gbm9ybWFsaXplVmFsdWUodmFsdWUpIHtcbiAgICBpZiAodHlwZW9mIHZhbHVlICE9PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSBTdHJpbmcodmFsdWUpXG4gICAgfVxuICAgIHJldHVybiB2YWx1ZVxuICB9XG5cbiAgLy8gQnVpbGQgYSBkZXN0cnVjdGl2ZSBpdGVyYXRvciBmb3IgdGhlIHZhbHVlIGxpc3RcbiAgZnVuY3Rpb24gaXRlcmF0b3JGb3IoaXRlbXMpIHtcbiAgICB2YXIgaXRlcmF0b3IgPSB7XG4gICAgICBuZXh0OiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbHVlID0gaXRlbXMuc2hpZnQoKVxuICAgICAgICByZXR1cm4ge2RvbmU6IHZhbHVlID09PSB1bmRlZmluZWQsIHZhbHVlOiB2YWx1ZX1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5pdGVyYWJsZSkge1xuICAgICAgaXRlcmF0b3JbU3ltYm9sLml0ZXJhdG9yXSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gaXRlcmF0b3JcbiAgICAgIH1cbiAgICB9XG5cbiAgICByZXR1cm4gaXRlcmF0b3JcbiAgfVxuXG4gIGZ1bmN0aW9uIEhlYWRlcnMoaGVhZGVycykge1xuICAgIHRoaXMubWFwID0ge31cblxuICAgIGlmIChoZWFkZXJzIGluc3RhbmNlb2YgSGVhZGVycykge1xuICAgICAgaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIHZhbHVlKVxuICAgICAgfSwgdGhpcylcbiAgICB9IGVsc2UgaWYgKEFycmF5LmlzQXJyYXkoaGVhZGVycykpIHtcbiAgICAgIGhlYWRlcnMuZm9yRWFjaChmdW5jdGlvbihoZWFkZXIpIHtcbiAgICAgICAgdGhpcy5hcHBlbmQoaGVhZGVyWzBdLCBoZWFkZXJbMV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH0gZWxzZSBpZiAoaGVhZGVycykge1xuICAgICAgT2JqZWN0LmdldE93blByb3BlcnR5TmFtZXMoaGVhZGVycykuZm9yRWFjaChmdW5jdGlvbihuYW1lKSB7XG4gICAgICAgIHRoaXMuYXBwZW5kKG5hbWUsIGhlYWRlcnNbbmFtZV0pXG4gICAgICB9LCB0aGlzKVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmFwcGVuZCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICB2YWx1ZSA9IG5vcm1hbGl6ZVZhbHVlKHZhbHVlKVxuICAgIHZhciBvbGRWYWx1ZSA9IHRoaXMubWFwW25hbWVdXG4gICAgdGhpcy5tYXBbbmFtZV0gPSBvbGRWYWx1ZSA/IG9sZFZhbHVlKycsJyt2YWx1ZSA6IHZhbHVlXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZVsnZGVsZXRlJ10gPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgZGVsZXRlIHRoaXMubWFwW25vcm1hbGl6ZU5hbWUobmFtZSldXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbihuYW1lKSB7XG4gICAgbmFtZSA9IG5vcm1hbGl6ZU5hbWUobmFtZSlcbiAgICByZXR1cm4gdGhpcy5oYXMobmFtZSkgPyB0aGlzLm1hcFtuYW1lXSA6IG51bGxcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmhhcyA9IGZ1bmN0aW9uKG5hbWUpIHtcbiAgICByZXR1cm4gdGhpcy5tYXAuaGFzT3duUHJvcGVydHkobm9ybWFsaXplTmFtZShuYW1lKSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKG5hbWUsIHZhbHVlKSB7XG4gICAgdGhpcy5tYXBbbm9ybWFsaXplTmFtZShuYW1lKV0gPSBub3JtYWxpemVWYWx1ZSh2YWx1ZSlcbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmZvckVhY2ggPSBmdW5jdGlvbihjYWxsYmFjaywgdGhpc0FyZykge1xuICAgIGZvciAodmFyIG5hbWUgaW4gdGhpcy5tYXApIHtcbiAgICAgIGlmICh0aGlzLm1hcC5oYXNPd25Qcm9wZXJ0eShuYW1lKSkge1xuICAgICAgICBjYWxsYmFjay5jYWxsKHRoaXNBcmcsIHRoaXMubWFwW25hbWVdLCBuYW1lLCB0aGlzKVxuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIEhlYWRlcnMucHJvdG90eXBlLmtleXMgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgaXRlbXMgPSBbXVxuICAgIHRoaXMuZm9yRWFjaChmdW5jdGlvbih2YWx1ZSwgbmFtZSkgeyBpdGVtcy5wdXNoKG5hbWUpIH0pXG4gICAgcmV0dXJuIGl0ZXJhdG9yRm9yKGl0ZW1zKVxuICB9XG5cbiAgSGVhZGVycy5wcm90b3R5cGUudmFsdWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUpIHsgaXRlbXMucHVzaCh2YWx1ZSkgfSlcbiAgICByZXR1cm4gaXRlcmF0b3JGb3IoaXRlbXMpXG4gIH1cblxuICBIZWFkZXJzLnByb3RvdHlwZS5lbnRyaWVzID0gZnVuY3Rpb24oKSB7XG4gICAgdmFyIGl0ZW1zID0gW11cbiAgICB0aGlzLmZvckVhY2goZnVuY3Rpb24odmFsdWUsIG5hbWUpIHsgaXRlbXMucHVzaChbbmFtZSwgdmFsdWVdKSB9KVxuICAgIHJldHVybiBpdGVyYXRvckZvcihpdGVtcylcbiAgfVxuXG4gIGlmIChzdXBwb3J0Lml0ZXJhYmxlKSB7XG4gICAgSGVhZGVycy5wcm90b3R5cGVbU3ltYm9sLml0ZXJhdG9yXSA9IEhlYWRlcnMucHJvdG90eXBlLmVudHJpZXNcbiAgfVxuXG4gIGZ1bmN0aW9uIGNvbnN1bWVkKGJvZHkpIHtcbiAgICBpZiAoYm9keS5ib2R5VXNlZCkge1xuICAgICAgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBUeXBlRXJyb3IoJ0FscmVhZHkgcmVhZCcpKVxuICAgIH1cbiAgICBib2R5LmJvZHlVc2VkID0gdHJ1ZVxuICB9XG5cbiAgZnVuY3Rpb24gZmlsZVJlYWRlclJlYWR5KHJlYWRlcikge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVzb2x2ZShyZWFkZXIucmVzdWx0KVxuICAgICAgfVxuICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICAgICAgcmVqZWN0KHJlYWRlci5lcnJvcilcbiAgICAgIH1cbiAgICB9KVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc0FycmF5QnVmZmVyKGJsb2IpIHtcbiAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKVxuICAgIHZhciBwcm9taXNlID0gZmlsZVJlYWRlclJlYWR5KHJlYWRlcilcbiAgICByZWFkZXIucmVhZEFzQXJyYXlCdWZmZXIoYmxvYilcbiAgICByZXR1cm4gcHJvbWlzZVxuICB9XG5cbiAgZnVuY3Rpb24gcmVhZEJsb2JBc1RleHQoYmxvYikge1xuICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpXG4gICAgdmFyIHByb21pc2UgPSBmaWxlUmVhZGVyUmVhZHkocmVhZGVyKVxuICAgIHJlYWRlci5yZWFkQXNUZXh0KGJsb2IpXG4gICAgcmV0dXJuIHByb21pc2VcbiAgfVxuXG4gIGZ1bmN0aW9uIHJlYWRBcnJheUJ1ZmZlckFzVGV4dChidWYpIHtcbiAgICB2YXIgdmlldyA9IG5ldyBVaW50OEFycmF5KGJ1ZilcbiAgICB2YXIgY2hhcnMgPSBuZXcgQXJyYXkodmlldy5sZW5ndGgpXG5cbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHZpZXcubGVuZ3RoOyBpKyspIHtcbiAgICAgIGNoYXJzW2ldID0gU3RyaW5nLmZyb21DaGFyQ29kZSh2aWV3W2ldKVxuICAgIH1cbiAgICByZXR1cm4gY2hhcnMuam9pbignJylcbiAgfVxuXG4gIGZ1bmN0aW9uIGJ1ZmZlckNsb25lKGJ1Zikge1xuICAgIGlmIChidWYuc2xpY2UpIHtcbiAgICAgIHJldHVybiBidWYuc2xpY2UoMClcbiAgICB9IGVsc2Uge1xuICAgICAgdmFyIHZpZXcgPSBuZXcgVWludDhBcnJheShidWYuYnl0ZUxlbmd0aClcbiAgICAgIHZpZXcuc2V0KG5ldyBVaW50OEFycmF5KGJ1ZikpXG4gICAgICByZXR1cm4gdmlldy5idWZmZXJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiBCb2R5KCkge1xuICAgIHRoaXMuYm9keVVzZWQgPSBmYWxzZVxuXG4gICAgdGhpcy5faW5pdEJvZHkgPSBmdW5jdGlvbihib2R5KSB7XG4gICAgICB0aGlzLl9ib2R5SW5pdCA9IGJvZHlcbiAgICAgIGlmICghYm9keSkge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9ICcnXG4gICAgICB9IGVsc2UgaWYgKHR5cGVvZiBib2R5ID09PSAnc3RyaW5nJykge1xuICAgICAgICB0aGlzLl9ib2R5VGV4dCA9IGJvZHlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5ibG9iICYmIEJsb2IucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUJsb2IgPSBib2R5XG4gICAgICB9IGVsc2UgaWYgKHN1cHBvcnQuZm9ybURhdGEgJiYgRm9ybURhdGEucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keUZvcm1EYXRhID0gYm9keVxuICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgdGhpcy5fYm9keVRleHQgPSBib2R5LnRvU3RyaW5nKClcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiBzdXBwb3J0LmJsb2IgJiYgaXNEYXRhVmlldyhib2R5KSkge1xuICAgICAgICB0aGlzLl9ib2R5QXJyYXlCdWZmZXIgPSBidWZmZXJDbG9uZShib2R5LmJ1ZmZlcilcbiAgICAgICAgLy8gSUUgMTAtMTEgY2FuJ3QgaGFuZGxlIGEgRGF0YVZpZXcgYm9keS5cbiAgICAgICAgdGhpcy5fYm9keUluaXQgPSBuZXcgQmxvYihbdGhpcy5fYm9keUFycmF5QnVmZmVyXSlcbiAgICAgIH0gZWxzZSBpZiAoc3VwcG9ydC5hcnJheUJ1ZmZlciAmJiAoQXJyYXlCdWZmZXIucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkgfHwgaXNBcnJheUJ1ZmZlclZpZXcoYm9keSkpKSB7XG4gICAgICAgIHRoaXMuX2JvZHlBcnJheUJ1ZmZlciA9IGJ1ZmZlckNsb25lKGJvZHkpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ3Vuc3VwcG9ydGVkIEJvZHlJbml0IHR5cGUnKVxuICAgICAgfVxuXG4gICAgICBpZiAoIXRoaXMuaGVhZGVycy5nZXQoJ2NvbnRlbnQtdHlwZScpKSB7XG4gICAgICAgIGlmICh0eXBlb2YgYm9keSA9PT0gJ3N0cmluZycpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAndGV4dC9wbGFpbjtjaGFyc2V0PVVURi04JylcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QmxvYiAmJiB0aGlzLl9ib2R5QmxvYi50eXBlKSB7XG4gICAgICAgICAgdGhpcy5oZWFkZXJzLnNldCgnY29udGVudC10eXBlJywgdGhpcy5fYm9keUJsb2IudHlwZSlcbiAgICAgICAgfSBlbHNlIGlmIChzdXBwb3J0LnNlYXJjaFBhcmFtcyAmJiBVUkxTZWFyY2hQYXJhbXMucHJvdG90eXBlLmlzUHJvdG90eXBlT2YoYm9keSkpIHtcbiAgICAgICAgICB0aGlzLmhlYWRlcnMuc2V0KCdjb250ZW50LXR5cGUnLCAnYXBwbGljYXRpb24veC13d3ctZm9ybS11cmxlbmNvZGVkO2NoYXJzZXQ9VVRGLTgnKVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHN1cHBvcnQuYmxvYikge1xuICAgICAgdGhpcy5ibG9iID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICAgIGlmIChyZWplY3RlZCkge1xuICAgICAgICAgIHJldHVybiByZWplY3RlZFxuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHRoaXMuX2JvZHlCbG9iKSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5QmxvYilcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKG5ldyBCbG9iKFt0aGlzLl9ib2R5QXJyYXlCdWZmZXJdKSlcbiAgICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ2NvdWxkIG5vdCByZWFkIEZvcm1EYXRhIGJvZHkgYXMgYmxvYicpXG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZShuZXcgQmxvYihbdGhpcy5fYm9keVRleHRdKSlcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICB0aGlzLmFycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIGlmICh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpIHtcbiAgICAgICAgICByZXR1cm4gY29uc3VtZWQodGhpcykgfHwgUHJvbWlzZS5yZXNvbHZlKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcilcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICByZXR1cm4gdGhpcy5ibG9iKCkudGhlbihyZWFkQmxvYkFzQXJyYXlCdWZmZXIpXG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLnRleHQgPSBmdW5jdGlvbigpIHtcbiAgICAgIHZhciByZWplY3RlZCA9IGNvbnN1bWVkKHRoaXMpXG4gICAgICBpZiAocmVqZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIHJlamVjdGVkXG4gICAgICB9XG5cbiAgICAgIGlmICh0aGlzLl9ib2R5QmxvYikge1xuICAgICAgICByZXR1cm4gcmVhZEJsb2JBc1RleHQodGhpcy5fYm9keUJsb2IpXG4gICAgICB9IGVsc2UgaWYgKHRoaXMuX2JvZHlBcnJheUJ1ZmZlcikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKHJlYWRBcnJheUJ1ZmZlckFzVGV4dCh0aGlzLl9ib2R5QXJyYXlCdWZmZXIpKVxuICAgICAgfSBlbHNlIGlmICh0aGlzLl9ib2R5Rm9ybURhdGEpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdjb3VsZCBub3QgcmVhZCBGb3JtRGF0YSBib2R5IGFzIHRleHQnKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgcmV0dXJuIFByb21pc2UucmVzb2x2ZSh0aGlzLl9ib2R5VGV4dClcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoc3VwcG9ydC5mb3JtRGF0YSkge1xuICAgICAgdGhpcy5mb3JtRGF0YSA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihkZWNvZGUpXG4gICAgICB9XG4gICAgfVxuXG4gICAgdGhpcy5qc29uID0gZnVuY3Rpb24oKSB7XG4gICAgICByZXR1cm4gdGhpcy50ZXh0KCkudGhlbihKU09OLnBhcnNlKVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzXG4gIH1cblxuICAvLyBIVFRQIG1ldGhvZHMgd2hvc2UgY2FwaXRhbGl6YXRpb24gc2hvdWxkIGJlIG5vcm1hbGl6ZWRcbiAgdmFyIG1ldGhvZHMgPSBbJ0RFTEVURScsICdHRVQnLCAnSEVBRCcsICdPUFRJT05TJywgJ1BPU1QnLCAnUFVUJ11cblxuICBmdW5jdGlvbiBub3JtYWxpemVNZXRob2QobWV0aG9kKSB7XG4gICAgdmFyIHVwY2FzZWQgPSBtZXRob2QudG9VcHBlckNhc2UoKVxuICAgIHJldHVybiAobWV0aG9kcy5pbmRleE9mKHVwY2FzZWQpID4gLTEpID8gdXBjYXNlZCA6IG1ldGhvZFxuICB9XG5cbiAgZnVuY3Rpb24gUmVxdWVzdChpbnB1dCwgb3B0aW9ucykge1xuICAgIG9wdGlvbnMgPSBvcHRpb25zIHx8IHt9XG4gICAgdmFyIGJvZHkgPSBvcHRpb25zLmJvZHlcblxuICAgIGlmIChpbnB1dCBpbnN0YW5jZW9mIFJlcXVlc3QpIHtcbiAgICAgIGlmIChpbnB1dC5ib2R5VXNlZCkge1xuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdBbHJlYWR5IHJlYWQnKVxuICAgICAgfVxuICAgICAgdGhpcy51cmwgPSBpbnB1dC51cmxcbiAgICAgIHRoaXMuY3JlZGVudGlhbHMgPSBpbnB1dC5jcmVkZW50aWFsc1xuICAgICAgaWYgKCFvcHRpb25zLmhlYWRlcnMpIHtcbiAgICAgICAgdGhpcy5oZWFkZXJzID0gbmV3IEhlYWRlcnMoaW5wdXQuaGVhZGVycylcbiAgICAgIH1cbiAgICAgIHRoaXMubWV0aG9kID0gaW5wdXQubWV0aG9kXG4gICAgICB0aGlzLm1vZGUgPSBpbnB1dC5tb2RlXG4gICAgICBpZiAoIWJvZHkgJiYgaW5wdXQuX2JvZHlJbml0ICE9IG51bGwpIHtcbiAgICAgICAgYm9keSA9IGlucHV0Ll9ib2R5SW5pdFxuICAgICAgICBpbnB1dC5ib2R5VXNlZCA9IHRydWVcbiAgICAgIH1cbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy51cmwgPSBTdHJpbmcoaW5wdXQpXG4gICAgfVxuXG4gICAgdGhpcy5jcmVkZW50aWFscyA9IG9wdGlvbnMuY3JlZGVudGlhbHMgfHwgdGhpcy5jcmVkZW50aWFscyB8fCAnb21pdCdcbiAgICBpZiAob3B0aW9ucy5oZWFkZXJzIHx8ICF0aGlzLmhlYWRlcnMpIHtcbiAgICAgIHRoaXMuaGVhZGVycyA9IG5ldyBIZWFkZXJzKG9wdGlvbnMuaGVhZGVycylcbiAgICB9XG4gICAgdGhpcy5tZXRob2QgPSBub3JtYWxpemVNZXRob2Qob3B0aW9ucy5tZXRob2QgfHwgdGhpcy5tZXRob2QgfHwgJ0dFVCcpXG4gICAgdGhpcy5tb2RlID0gb3B0aW9ucy5tb2RlIHx8IHRoaXMubW9kZSB8fCBudWxsXG4gICAgdGhpcy5yZWZlcnJlciA9IG51bGxcblxuICAgIGlmICgodGhpcy5tZXRob2QgPT09ICdHRVQnIHx8IHRoaXMubWV0aG9kID09PSAnSEVBRCcpICYmIGJvZHkpIHtcbiAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0JvZHkgbm90IGFsbG93ZWQgZm9yIEdFVCBvciBIRUFEIHJlcXVlc3RzJylcbiAgICB9XG4gICAgdGhpcy5faW5pdEJvZHkoYm9keSlcbiAgfVxuXG4gIFJlcXVlc3QucHJvdG90eXBlLmNsb25lID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIG5ldyBSZXF1ZXN0KHRoaXMsIHsgYm9keTogdGhpcy5fYm9keUluaXQgfSlcbiAgfVxuXG4gIGZ1bmN0aW9uIGRlY29kZShib2R5KSB7XG4gICAgdmFyIGZvcm0gPSBuZXcgRm9ybURhdGEoKVxuICAgIGJvZHkudHJpbSgpLnNwbGl0KCcmJykuZm9yRWFjaChmdW5jdGlvbihieXRlcykge1xuICAgICAgaWYgKGJ5dGVzKSB7XG4gICAgICAgIHZhciBzcGxpdCA9IGJ5dGVzLnNwbGl0KCc9JylcbiAgICAgICAgdmFyIG5hbWUgPSBzcGxpdC5zaGlmdCgpLnJlcGxhY2UoL1xcKy9nLCAnICcpXG4gICAgICAgIHZhciB2YWx1ZSA9IHNwbGl0LmpvaW4oJz0nKS5yZXBsYWNlKC9cXCsvZywgJyAnKVxuICAgICAgICBmb3JtLmFwcGVuZChkZWNvZGVVUklDb21wb25lbnQobmFtZSksIGRlY29kZVVSSUNvbXBvbmVudCh2YWx1ZSkpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gZm9ybVxuICB9XG5cbiAgZnVuY3Rpb24gcGFyc2VIZWFkZXJzKHJhd0hlYWRlcnMpIHtcbiAgICB2YXIgaGVhZGVycyA9IG5ldyBIZWFkZXJzKClcbiAgICByYXdIZWFkZXJzLnNwbGl0KC9cXHI/XFxuLykuZm9yRWFjaChmdW5jdGlvbihsaW5lKSB7XG4gICAgICB2YXIgcGFydHMgPSBsaW5lLnNwbGl0KCc6JylcbiAgICAgIHZhciBrZXkgPSBwYXJ0cy5zaGlmdCgpLnRyaW0oKVxuICAgICAgaWYgKGtleSkge1xuICAgICAgICB2YXIgdmFsdWUgPSBwYXJ0cy5qb2luKCc6JykudHJpbSgpXG4gICAgICAgIGhlYWRlcnMuYXBwZW5kKGtleSwgdmFsdWUpXG4gICAgICB9XG4gICAgfSlcbiAgICByZXR1cm4gaGVhZGVyc1xuICB9XG5cbiAgQm9keS5jYWxsKFJlcXVlc3QucHJvdG90eXBlKVxuXG4gIGZ1bmN0aW9uIFJlc3BvbnNlKGJvZHlJbml0LCBvcHRpb25zKSB7XG4gICAgaWYgKCFvcHRpb25zKSB7XG4gICAgICBvcHRpb25zID0ge31cbiAgICB9XG5cbiAgICB0aGlzLnR5cGUgPSAnZGVmYXVsdCdcbiAgICB0aGlzLnN0YXR1cyA9ICdzdGF0dXMnIGluIG9wdGlvbnMgPyBvcHRpb25zLnN0YXR1cyA6IDIwMFxuICAgIHRoaXMub2sgPSB0aGlzLnN0YXR1cyA+PSAyMDAgJiYgdGhpcy5zdGF0dXMgPCAzMDBcbiAgICB0aGlzLnN0YXR1c1RleHQgPSAnc3RhdHVzVGV4dCcgaW4gb3B0aW9ucyA/IG9wdGlvbnMuc3RhdHVzVGV4dCA6ICdPSydcbiAgICB0aGlzLmhlYWRlcnMgPSBuZXcgSGVhZGVycyhvcHRpb25zLmhlYWRlcnMpXG4gICAgdGhpcy51cmwgPSBvcHRpb25zLnVybCB8fCAnJ1xuICAgIHRoaXMuX2luaXRCb2R5KGJvZHlJbml0KVxuICB9XG5cbiAgQm9keS5jYWxsKFJlc3BvbnNlLnByb3RvdHlwZSlcblxuICBSZXNwb25zZS5wcm90b3R5cGUuY2xvbmUgPSBmdW5jdGlvbigpIHtcbiAgICByZXR1cm4gbmV3IFJlc3BvbnNlKHRoaXMuX2JvZHlJbml0LCB7XG4gICAgICBzdGF0dXM6IHRoaXMuc3RhdHVzLFxuICAgICAgc3RhdHVzVGV4dDogdGhpcy5zdGF0dXNUZXh0LFxuICAgICAgaGVhZGVyczogbmV3IEhlYWRlcnModGhpcy5oZWFkZXJzKSxcbiAgICAgIHVybDogdGhpcy51cmxcbiAgICB9KVxuICB9XG5cbiAgUmVzcG9uc2UuZXJyb3IgPSBmdW5jdGlvbigpIHtcbiAgICB2YXIgcmVzcG9uc2UgPSBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogMCwgc3RhdHVzVGV4dDogJyd9KVxuICAgIHJlc3BvbnNlLnR5cGUgPSAnZXJyb3InXG4gICAgcmV0dXJuIHJlc3BvbnNlXG4gIH1cblxuICB2YXIgcmVkaXJlY3RTdGF0dXNlcyA9IFszMDEsIDMwMiwgMzAzLCAzMDcsIDMwOF1cblxuICBSZXNwb25zZS5yZWRpcmVjdCA9IGZ1bmN0aW9uKHVybCwgc3RhdHVzKSB7XG4gICAgaWYgKHJlZGlyZWN0U3RhdHVzZXMuaW5kZXhPZihzdGF0dXMpID09PSAtMSkge1xuICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0ludmFsaWQgc3RhdHVzIGNvZGUnKVxuICAgIH1cblxuICAgIHJldHVybiBuZXcgUmVzcG9uc2UobnVsbCwge3N0YXR1czogc3RhdHVzLCBoZWFkZXJzOiB7bG9jYXRpb246IHVybH19KVxuICB9XG5cbiAgc2VsZi5IZWFkZXJzID0gSGVhZGVyc1xuICBzZWxmLlJlcXVlc3QgPSBSZXF1ZXN0XG4gIHNlbGYuUmVzcG9uc2UgPSBSZXNwb25zZVxuXG4gIHNlbGYuZmV0Y2ggPSBmdW5jdGlvbihpbnB1dCwgaW5pdCkge1xuICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbihyZXNvbHZlLCByZWplY3QpIHtcbiAgICAgIHZhciByZXF1ZXN0ID0gbmV3IFJlcXVlc3QoaW5wdXQsIGluaXQpXG4gICAgICB2YXIgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KClcblxuICAgICAgeGhyLm9ubG9hZCA9IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgb3B0aW9ucyA9IHtcbiAgICAgICAgICBzdGF0dXM6IHhoci5zdGF0dXMsXG4gICAgICAgICAgc3RhdHVzVGV4dDogeGhyLnN0YXR1c1RleHQsXG4gICAgICAgICAgaGVhZGVyczogcGFyc2VIZWFkZXJzKHhoci5nZXRBbGxSZXNwb25zZUhlYWRlcnMoKSB8fCAnJylcbiAgICAgICAgfVxuICAgICAgICBvcHRpb25zLnVybCA9ICdyZXNwb25zZVVSTCcgaW4geGhyID8geGhyLnJlc3BvbnNlVVJMIDogb3B0aW9ucy5oZWFkZXJzLmdldCgnWC1SZXF1ZXN0LVVSTCcpXG4gICAgICAgIHZhciBib2R5ID0gJ3Jlc3BvbnNlJyBpbiB4aHIgPyB4aHIucmVzcG9uc2UgOiB4aHIucmVzcG9uc2VUZXh0XG4gICAgICAgIHJlc29sdmUobmV3IFJlc3BvbnNlKGJvZHksIG9wdGlvbnMpKVxuICAgICAgfVxuXG4gICAgICB4aHIub25lcnJvciA9IGZ1bmN0aW9uKCkge1xuICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignTmV0d29yayByZXF1ZXN0IGZhaWxlZCcpKVxuICAgICAgfVxuXG4gICAgICB4aHIub250aW1lb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpXG4gICAgICB9XG5cbiAgICAgIHhoci5vcGVuKHJlcXVlc3QubWV0aG9kLCByZXF1ZXN0LnVybCwgdHJ1ZSlcblxuICAgICAgaWYgKHJlcXVlc3QuY3JlZGVudGlhbHMgPT09ICdpbmNsdWRlJykge1xuICAgICAgICB4aHIud2l0aENyZWRlbnRpYWxzID0gdHJ1ZVxuICAgICAgfVxuXG4gICAgICBpZiAoJ3Jlc3BvbnNlVHlwZScgaW4geGhyICYmIHN1cHBvcnQuYmxvYikge1xuICAgICAgICB4aHIucmVzcG9uc2VUeXBlID0gJ2Jsb2InXG4gICAgICB9XG5cbiAgICAgIHJlcXVlc3QuaGVhZGVycy5mb3JFYWNoKGZ1bmN0aW9uKHZhbHVlLCBuYW1lKSB7XG4gICAgICAgIHhoci5zZXRSZXF1ZXN0SGVhZGVyKG5hbWUsIHZhbHVlKVxuICAgICAgfSlcblxuICAgICAgeGhyLnNlbmQodHlwZW9mIHJlcXVlc3QuX2JvZHlJbml0ID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiByZXF1ZXN0Ll9ib2R5SW5pdClcbiAgICB9KVxuICB9XG4gIHNlbGYuZmV0Y2gucG9seWZpbGwgPSB0cnVlXG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcyk7XG4iLCJjb25zdCBjb250cm9sbGVyID0gcmVxdWlyZSgnLi9wZW5ndWluLWNvbnRyb2xsZXInKTtcbmNvbnN0IHZpZXcgPSByZXF1aXJlKCcuL3Blbmd1aW4tdmlldycpO1xuY29uc3QgbW9kZWwgPSByZXF1aXJlKCcuL3Blbmd1aW4tbW9kZWwnKTtcblxuY29uc3QgbW9kZVdpdGhVcmwgPSAoKSA9PlxuICBPYmplY3QuYXNzaWduKHt9LFxuICAgIG1vZGVsLCB7IGZldGNoRGF0YTogbW9kZWwuZmV0Y2hEYXRhKCdodHRwOi8vbG9jYWxob3N0OjQwMDAvYXBpJykgfSk7XG5cbmNvbnN0IHZpZXdXaXRoUm9vdCA9ICgpID0+XG4gIE9iamVjdC5hc3NpZ24oe30sXG4gICAgdmlldywgeyBpbml0UGVuZ3VpblZpZXc6IHZpZXcuaW5pdFBlbmd1aW5WaWV3KHsgaWQ6ICdyb290JyB9KSB9KTtcblxuY29uc3Qgb25ET01Db250ZW50TG9hZGVkID0gKCkgPT4ge1xuICBjb250cm9sbGVyLmluaXRpYWxpemUobW9kZVdpdGhVcmwoKSwgdmlld1dpdGhSb290KCkpO1xufTtcblxud2luZG93LmRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ0RPTUNvbnRlbnRMb2FkZWQnLCBvbkRPTUNvbnRlbnRMb2FkZWQpO1xuIiwiY29uc3QgZGF0YVVwZGF0ZUxpc3RlbmVyID0gKHsgdXBkYXRlUGVuZ3VpbiB9KSA9PiAodG9waWMsIHsgZGF0YSwgaW5kZXggfSkgPT4ge1xuICB1cGRhdGVQZW5ndWluKGRhdGFbaW5kZXhdKTtcbn07XG5cbmNvbnN0IHN1YnNjcmliZU1vZGVsTGlzdGVuZXJzID0gKHBlbmd1aW5WaWV3ID0ge30sIHN1YnNjcmliZSA9ICgpID0+IHt9LCBkYXRhVXBkYXRlID0gJycpID0+IHtcbiAgc3Vic2NyaWJlKFtcbiAgICB7IHRvcGljOiBkYXRhVXBkYXRlLCBjYWxsYmFjazogZGF0YVVwZGF0ZUxpc3RlbmVyKHBlbmd1aW5WaWV3KSB9LFxuICBdKTtcbn07XG5cbmNvbnN0IGNsaWNrRXZ0TGlzdGVuZXIgPSAoeyB1cGRhdGVJbmRleCB9KSA9PiAoeyB0YXJnZXQgfSkgPT4ge1xuICBpZiAodGFyZ2V0Lm5vZGVOYW1lICE9PSAnQlVUVE9OJykgcmV0dXJuO1xuXG4gIGNvbnN0IGdldEluZGV4ID0ge1xuICAgICduZXh0LXBlbmd1aW4nOiAoKSA9PiAxLFxuICAgICdwcmV2aW91cy1wZW5ndWluJzogKCkgPT4gLTEsXG4gIH07XG5cbiAgdXBkYXRlSW5kZXgoZ2V0SW5kZXhbdGFyZ2V0LmlkXSgpKTtcbn07XG5cbmNvbnN0IGluaXRpYWxpemUgPSAocGVuZ3Vpbk1vZGVsID0ge30sIHBlbmd1aW5WaWV3ID0ge30pID0+IHtcbiAgcGVuZ3VpblZpZXcuaW5pdFBlbmd1aW5WaWV3KCk7XG4gIHBlbmd1aW5WaWV3LnBlbmd1aW5Db250cm9sbHMoKTtcbiAgcGVuZ3VpblZpZXcuYWRkRXZlbnRDbGlja0xpc3RlbmVyKGNsaWNrRXZ0TGlzdGVuZXIocGVuZ3Vpbk1vZGVsKSk7XG5cbiAgc3Vic2NyaWJlTW9kZWxMaXN0ZW5lcnMoXG4gICAgcGVuZ3VpblZpZXcsXG4gICAgcGVuZ3Vpbk1vZGVsLnN1YnNjcmliZSxcbiAgICBwZW5ndWluTW9kZWwuREFUQV9VUERBVEUpO1xuXG4gIHBlbmd1aW5Nb2RlbC5mZXRjaERhdGEoKTtcbn07XG5cbm1vZHVsZS5leHBvcnRzID0ge1xuICBpbml0aWFsaXplLFxufTtcbiIsImNvbnN0IFB1YlN1YiA9IHJlcXVpcmUoJ3B1YnN1Yi1qcycpO1xuY29uc3QgZmV0Y2ggPSByZXF1aXJlKCdpc29tb3JwaGljLWZldGNoJyk7XG5cbmNvbnN0IERBVEFfVVBEQVRFID0gJ2RhdGEudXBkYXRlZCc7XG5cbmxldCBtb2RlbCA9IHtcbiAgZGF0YTogW10sXG4gIGluZGV4OiAwLFxufTtcblxuY29uc3QgZ2V0TW9kZWwgPSAoKSA9PiBPYmplY3QuYXNzaWduKHt9LCBtb2RlbCk7XG5cbmNvbnN0IHNldERhdGEgPSAoZGF0YSkgPT4ge1xuICBtb2RlbCA9IE9iamVjdC5hc3NpZ24oe30sIG1vZGVsLCB7IGRhdGEgfSk7XG4gIFB1YlN1Yi5wdWJsaXNoKERBVEFfVVBEQVRFLCBnZXRNb2RlbCgpKTtcbn07XG5cbmNvbnN0IHVwZGF0ZUluZGV4ID0gKGlkeCkgPT4ge1xuICBjb25zdCB7IGluZGV4LCBkYXRhIH0gPSBnZXRNb2RlbCgpO1xuICBpZiAoaW5kZXggKyBpZHggPCAwKSByZXR1cm47XG4gIGlmIChpbmRleCArIGlkeCA+IGRhdGEubGVuZ3RoIC0gMSkgcmV0dXJuO1xuXG4gIG1vZGVsID0gT2JqZWN0LmFzc2lnbih7fSwgbW9kZWwsIHsgaW5kZXg6IGluZGV4ICsgaWR4IH0pO1xuICBQdWJTdWIucHVibGlzaChEQVRBX1VQREFURSwgZ2V0TW9kZWwoKSk7XG59O1xuXG5jb25zdCBzdWJzY3JpYmUgPSAoc3Vic2NyaWJlcnMpID0+IHtcbiAgc3Vic2NyaWJlcnMuZm9yRWFjaCgoeyB0b3BpYywgY2FsbGJhY2sgfSkgPT4ge1xuICAgIFB1YlN1Yi5zdWJzY3JpYmUodG9waWMsIGNhbGxiYWNrKTtcbiAgfSk7XG59O1xuXG5jb25zdCBmZXRjaERhdGEgPSBlbmRwb2ludCA9PiAoKSA9PlxuICBmZXRjaChgJHtlbmRwb2ludH0vZGF0YWApXG4gICAgLnRoZW4oKHJlc3ApID0+IHtcbiAgICAgIGlmIChyZXNwLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICAgIHJldHVybiByZXNwLmpzb24oKTtcbiAgICAgIH1cbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChuZXcgRXJyb3IoYGVycm9yOiR7cmVzcC5zdGF0dXN9YCkpO1xuICAgIH0pXG4gICAgLnRoZW4oc2V0RGF0YSlcbiAgICAudGhlbigoKSA9PiAnZG9uZScpXG4gICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoZXJyLm1lc3NhZ2UpO1xuICAgIH0pO1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgZmV0Y2hEYXRhLFxuICB1cGRhdGVJbmRleCxcbiAgc3Vic2NyaWJlLFxuICBEQVRBX1VQREFURSxcbn07XG4iLCJjb25zdCAkcXMgPSBzZWxlY3RvciA9PiB3aW5kb3cuZG9jdW1lbnQucXVlcnlTZWxlY3Rvci5iaW5kKHdpbmRvdy5kb2N1bWVudCkoc2VsZWN0b3IpO1xuXG5jb25zdCBhZGRFdmVudENsaWNrTGlzdGVuZXIgPSAoY2xpY2tFdnRMaXN0bmVyKSA9PiB7XG4gICRxcygnI3Blbmd1aW5WaWV3JykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCBjbGlja0V2dExpc3RuZXIpO1xufTtcblxuY29uc3QgZW1wdHlFbGVtZW50ID0gKCRlbG0pID0+IHtcbiAgJGVsbS5pbm5lckhUTUwgPSAnJzsgLy8gZXNsaW50LWRpc2FibGUtbGluZSAgbm8tcGFyYW0tcmVhc3NpZ25cbn07XG5cbmNvbnN0IHBlbmd1aW5UaXRsZSA9ICh7IG5hbWUgfSkgPT4ge1xuICBjb25zdCAkaGVhZGVyID0gJHFzKCcjcGVuZ3VpblZpZXcgaGVhZGVyJyk7XG4gIGNvbnN0ICRoMyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdoMycpO1xuICAkaDMuYXBwZW5kQ2hpbGQod2luZG93LmRvY3VtZW50LmNyZWF0ZVRleHROb2RlKG5hbWUpKTtcbiAgZW1wdHlFbGVtZW50KCRoZWFkZXIpO1xuICAkaGVhZGVyLmFwcGVuZENoaWxkKCRoMyk7XG59O1xuXG5jb25zdCBwZW5ndWluSW1hZ2UgPSAoeyBpbWFnZVVybCwgbmFtZSB9KSA9PiB7XG4gIGNvbnN0ICRwZW5ndWluSW1hZ2UgPSAkcXMoJyNwZW5ndWluVmlldyAucGVuZ3Vpbi1pbWFnZScpO1xuICBjb25zdCAkaW1nID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAkaW1nLnNldEF0dHJpYnV0ZSgnc3JjJywgaW1hZ2VVcmwpO1xuICAkaW1nLnNldEF0dHJpYnV0ZSgnYWx0JywgYGltYWdlICR7bmFtZX1gKTtcbiAgZW1wdHlFbGVtZW50KCRwZW5ndWluSW1hZ2UpO1xuICAkcGVuZ3VpbkltYWdlLmFwcGVuZENoaWxkKCRpbWcpO1xufTtcblxuY29uc3QgcGVuZ3VpbkluZm8gPSAoeyBzaXplLCBmYXZvcml0ZUZvb2QgfSkgPT4ge1xuICBjb25zdCAkcGVuZ3VpbkluZm8gPSAkcXMoJyNwZW5ndWluVmlldyAucGVuZ3Vpbi1pbmZvJyk7XG4gIGNvbnN0IGZyYWdtZW50ID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZURvY3VtZW50RnJhZ21lbnQoKTtcblxuICBbeyBsYWJlbDogJ1NpemU6ICcsIGRhdGE6IHNpemUgfSxcbiAgICB7IGxhYmVsOiAnRmF2b3JpdGUgZm9vZDogJywgZGF0YTogZmF2b3JpdGVGb29kIH0sXG4gIF0uZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgIGNvbnN0ICRwID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ3AnKTtcbiAgICBjb25zdCAkc3BhbiA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdzcGFuJyk7XG5cbiAgICAkc3Bhbi5hcHBlbmRDaGlsZCh3aW5kb3cuZG9jdW1lbnQuY3JlYXRlVGV4dE5vZGUoaXRlbS5sYWJlbCkpO1xuICAgICRwLmFwcGVuZENoaWxkKCRzcGFuKTtcblxuICAgICRwLmFwcGVuZENoaWxkKHdpbmRvdy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtLmRhdGEpKTtcbiAgICBmcmFnbWVudC5hcHBlbmRDaGlsZCgkcCk7XG4gIH0pO1xuXG4gIGVtcHR5RWxlbWVudCgkcGVuZ3VpbkluZm8pO1xuICAkcGVuZ3VpbkluZm8uYXBwZW5kQ2hpbGQoZnJhZ21lbnQpO1xufTtcblxuY29uc3QgcGVuZ3VpbkNvbnRyb2xscyA9ICgpID0+IHtcbiAgY29uc3QgJHBlbmd1aW5Db250cm9sbHMgPSAkcXMoJyNwZW5ndWluVmlldyAucGVuZ3Vpbi1jb250cm9sbHMnKTtcbiAgY29uc3QgZnJhZ21lbnQgPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRG9jdW1lbnRGcmFnbWVudCgpO1xuXG4gIFsncHJldmlvdXMnLCAnbmV4dCddLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICBjb25zdCAkYnV0dG9uID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2J1dHRvbicpO1xuICAgICRidXR0b24uc2V0QXR0cmlidXRlKCdpZCcsIGAke2l0ZW19LXBlbmd1aW5gKTtcbiAgICAkYnV0dG9uLmFwcGVuZENoaWxkKHdpbmRvdy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZShpdGVtKSk7XG4gICAgZnJhZ21lbnQuYXBwZW5kQ2hpbGQoJGJ1dHRvbik7XG4gIH0pO1xuXG4gIGVtcHR5RWxlbWVudCgkcGVuZ3VpbkNvbnRyb2xscyk7XG4gICRwZW5ndWluQ29udHJvbGxzLmFwcGVuZENoaWxkKGZyYWdtZW50KTtcbn07XG5cbmNvbnN0IGluaXRQZW5ndWluVmlldyA9ICh7IGlkIH0pID0+ICgpID0+IHtcbiAgY29uc3QgJHJvb3QgPSAkcXMoYCMke2lkfWApO1xuXG4gIGNvbnN0ICRwZW5ndWluVmlldyA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVFbGVtZW50KCdkaXYnKTtcbiAgJHBlbmd1aW5WaWV3LnNldEF0dHJpYnV0ZSgnaWQnLCAncGVuZ3VpblZpZXcnKTtcblxuICBjb25zdCAkaGVhZGVyID0gd2luZG93LmRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2hlYWRlcicpO1xuXG4gICRwZW5ndWluVmlldy5hcHBlbmRDaGlsZCgkaGVhZGVyKTtcblxuICBbJ3Blbmd1aW4taW1hZ2UnLCAncGVuZ3Vpbi1pbmZvJywgJ3Blbmd1aW4tY29udHJvbGxzJ11cbiAgICAuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgY29uc3QgJHNlY3Rpb24gPSB3aW5kb3cuZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnc2VjdGlvbicpO1xuICAgICAgJHNlY3Rpb24uY2xhc3NMaXN0LmFkZChpdGVtKTtcbiAgICAgICRwZW5ndWluVmlldy5hcHBlbmRDaGlsZCgkc2VjdGlvbik7XG4gICAgfSk7XG5cbiAgZW1wdHlFbGVtZW50KCRyb290KTtcblxuICAkcm9vdC5hcHBlbmRDaGlsZCgkcGVuZ3VpblZpZXcpO1xufTtcblxuY29uc3QgdXBkYXRlUGVuZ3VpbiA9IChwcm9wcykgPT4ge1xuICBwZW5ndWluVGl0bGUocHJvcHMpO1xuICBwZW5ndWluSW1hZ2UocHJvcHMpO1xuICBwZW5ndWluSW5mbyhwcm9wcyk7XG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHtcbiAgaW5pdFBlbmd1aW5WaWV3LFxuICBwZW5ndWluVGl0bGUsXG4gIHBlbmd1aW5JbWFnZSxcbiAgcGVuZ3VpbkluZm8sXG4gIHBlbmd1aW5Db250cm9sbHMsXG4gIHVwZGF0ZVBlbmd1aW4sXG4gIGFkZEV2ZW50Q2xpY2tMaXN0ZW5lcixcbn07XG4iXX0="}